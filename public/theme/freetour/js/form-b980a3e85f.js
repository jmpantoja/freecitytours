!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(e,t){function n(e,t){this.$form=e,this.$input=t,this.reset(),t.on("change paste",this.reset.bind(this))}var i=function(){return!1},r={numHalted:0,haltValidation:function(t){this.numHalted++,e.formUtils.haltValidation=!0,t.unbind("submit",i).bind("submit",i).find('*[type="submit"]').addClass("disabled").attr("disabled","disabled")},unHaltValidation:function(t){0===--this.numHalted&&(e.formUtils.haltValidation=!1,t.unbind("submit",i).find('*[type="submit"]').removeClass("disabled").removeAttr("disabled","disabled"))}};n.prototype.reset=function(){this.haltedFormValidation=!1,this.hasRun=!1,this.isRunning=!1,this.result=void 0},n.prototype.run=function(e,t){return"keyup"===e?null:this.isRunning?(this.haltedFormValidation||"submit"!==e||(r.haltValidation(),this.haltedFormValidation=!0),null):this.hasRun?this.result:("submit"===e&&(r.haltValidation(this.$form),this.haltedFormValidation=!0),this.isRunning=!0,this.$input.attr("disabled","disabled").addClass("async-validation"),this.$form.addClass("async-validation"),t(function(e){this.done(e)}.bind(this)),null)},n.prototype.done=function(e){this.result=e,this.hasRun=!0,this.isRunning=!1,this.$input.removeAttr("disabled").removeClass("async-validation"),this.$form.removeClass("async-validation"),this.haltedFormValidation?(r.unHaltValidation(this.$form),this.$form.trigger("submit")):this.$input.trigger("validation.revalidate")},e.formUtils=e.extend(e.formUtils||{},{asyncValidation:function(e,t,i){var r,a=t.get(0);return a.asyncValidators||(a.asyncValidators={}),a.asyncValidators[e]?r=a.asyncValidators[e]:(r=new n(i,t),a.asyncValidators[e]=r),r}})}(e),function(e,t){"use strict";function n(t){t&&"custom"===t.errorMessagePosition&&"function"==typeof t.errorMessageCustom&&(e.formUtils.warn("Use of deprecated function errorMessageCustom, use config.submitErrorMessageCallback instead"),t.submitErrorMessageCallback=function(e,n){t.errorMessageCustom(e,t.language.errorTitle,n,t)})}function i(t){if(t.errorMessagePosition&&"object"==typeof t.errorMessagePosition){e.formUtils.warn("Deprecated use of config parameter errorMessagePosition, use config.submitErrorMessageCallback instead");var n=t.errorMessagePosition;t.errorMessagePosition="top",t.submitErrorMessageCallback=function(){return n}}}function r(t){var n=t.find("[data-validation-if-checked]");n.length&&e.formUtils.warn('Detected use of attribute "data-validation-if-checked" which is deprecated. Use "data-validation-depends-on" provided by module "logic"'),n.on("beforeValidation",function(){var n=e(this),i=n.valAttr("if-checked"),r=e('input[name="'+i+'"]',t),a=r.is(":checked"),o=(e.formUtils.getValue(r)||"").toString(),s=n.valAttr("if-checked-value");(!a||s&&s!==o)&&n.valAttr("skipped",!0)})}function a(t){var n={se:"sv",cz:"cs",dk:"da"};if(t.lang in n){var i=n[t.lang];e.formUtils.warn('Deprecated use of lang code "'+t.lang+'" use "'+i+'" instead'),t.lang=i}}e.fn.validateForm=function(t,n){return e.formUtils.warn("Use of deprecated function $.validateForm, use $.isValid instead"),this.isValid(t,n,!0)},e(window).on("formValidationPluginInit",function(e,t){a(t),n(t),i(t)}).on("validatorsLoaded formValidationSetup",function(t,n){n||(n=e("form")),r(n)})}(e),function(e){"use strict";var t={resolveErrorMessage:function(e,t,n,i,r){var a=i.validationErrorMsgAttribute+"-"+n.replace("validate_",""),o=e.attr(a);return o||(o=e.attr(i.validationErrorMsgAttribute))||(o="function"!=typeof t.errorMessageKey?r[t.errorMessageKey]:r[t.errorMessageKey(i)])||(o=t.errorMessage),o},getParentContainer:function(t){if(t.valAttr("error-msg-container"))return e(t.valAttr("error-msg-container"));var n=t.parent();if(!n.hasClass("form-group")&&!n.closest("form").hasClass("form-horizontal")){var i=n.closest(".form-group");if(i.length)return i.eq(0)}return n},applyInputErrorStyling:function(e,t){e.addClass(t.errorElementClass).removeClass(t.successElementClass),this.getParentContainer(e).addClass(t.inputParentClassOnError).removeClass(t.inputParentClassOnSuccess),""!==t.borderColorOnError&&e.css("border-color",t.borderColorOnError)},applyInputSuccessStyling:function(e,t){e.addClass(t.successElementClass),this.getParentContainer(e).addClass(t.inputParentClassOnSuccess)},removeInputStylingAndMessage:function(e,n){e.removeClass(n.successElementClass).removeClass(n.errorElementClass).css("border-color","");var i=t.getParentContainer(e);if(i.removeClass(n.inputParentClassOnError).removeClass(n.inputParentClassOnSuccess),"function"==typeof n.inlineErrorMessageCallback){var r=n.inlineErrorMessageCallback(e,!1,n);r&&r.html("")}else i.find("."+n.errorMessageClass).remove()},removeAllMessagesAndStyling:function(n,i){if("function"==typeof i.submitErrorMessageCallback){var r=i.submitErrorMessageCallback(n,!1,i);r&&r.html("")}else n.find("."+i.errorMessageClass+".alert").remove();n.find("."+i.errorElementClass+",."+i.successElementClass).each(function(){t.removeInputStylingAndMessage(e(this),i)})},setInlineMessage:function(t,n,i){this.applyInputErrorStyling(t,i);var r,a=document.getElementById(t.attr("name")+"_err_msg"),o=!1,s=function(i){e.formUtils.$win.trigger("validationErrorDisplay",[t,i]),i.html(n)},l=function(){var a=!1;o.find("."+i.errorMessageClass).each(function(){if(this.inputReferer===t[0])return a=e(this),!1}),a?n?s(a):a.remove():""!==n&&(r=e('<div class="'+i.errorMessageClass+' alert"></div>'),s(r),r[0].inputReferer=t[0],o.prepend(r))};if(a)e.formUtils.warn("Using deprecated element reference "+a.id),o=e(a),l();else if("function"==typeof i.inlineErrorMessageCallback){if(!(o=i.inlineErrorMessageCallback(t,n,i)))return;l()}else{var d=this.getParentContainer(t);r=d.find("."+i.errorMessageClass+".help-block"),0===r.length&&(r=e("<span></span>").addClass("help-block").addClass(i.errorMessageClass),r.appendTo(d)),s(r)}},setMessageInTopOfForm:function(t,n,i,r){var a='<div class="{errorMessageClass} alert alert-danger"><strong>{errorTitle}</strong><ul>{fields}</ul></div>',o=!1;if("function"!=typeof i.submitErrorMessageCallback||(o=i.submitErrorMessageCallback(t,n,i))){var s={errorTitle:r.errorTitle,fields:"",errorMessageClass:i.errorMessageClass};e.each(n,function(e,t){s.fields+="<li>"+t+"</li>"}),e.each(s,function(e,t){a=a.replace("{"+e+"}",t)}),o?o.html(a):t.children().eq(0).before(e(a))}}};e.formUtils=e.extend(e.formUtils||{},{dialogs:t})}(e),function(e,t,n){"use strict";var i=0;e.fn.validateOnBlur=function(t,n){var i=this,r=this.find("*[data-validation]");return r.each(function(){var r=e(this);if(r.is("[type=radio]")){var a=i.find('[type=radio][name="'+r.attr("name")+'"]');a.bind("blur.validation",function(){r.validateInputOnBlur(t,n,!0,"blur")}),n.validateCheckboxRadioOnClick&&a.bind("click.validation",function(){r.validateInputOnBlur(t,n,!0,"click")})}}),r.bind("blur.validation",function(){e(this).validateInputOnBlur(t,n,!0,"blur")}),n.validateCheckboxRadioOnClick&&this.find("input[type=checkbox][data-validation],input[type=radio][data-validation]").bind("click.validation",function(){e(this).validateInputOnBlur(t,n,!0,"click")}),this},e.fn.validateOnEvent=function(t,n){return("FORM"===this[0].nodeName?this.find("*[data-validation-event]"):this).each(function(){var i=e(this),r=i.valAttr("event");r&&i.unbind(r+".validation").bind(r+".validation",function(i){9!==(i||{}).keyCode&&e(this).validateInputOnBlur(t,n,!0,r)})}),this},e.fn.showHelpOnFocus=function(t){return t||(t="data-validation-help"),this.find("textarea,input").each(function(){var n=e(this),r="jquery_form_help_"+ ++i,a=n.attr(t);n.removeClass("has-help-text").unbind("focus.help").unbind("blur.help"),a&&n.addClass("has-help-txt").bind("focus.help",function(){var t=n.parent().find("."+r);0===t.length&&(t=e("<span />").addClass(r).addClass("help").addClass("help-block").text(a).hide(),n.after(t)),t.fadeIn()}).bind("blur.help",function(){e(this).parent().find("."+r).fadeOut("slow")})}),this},e.fn.validate=function(t,n,i){var r=e.extend({},e.formUtils.LANG,i||{});this.each(function(){var i=e(this),a=i.closest("form").get(0)||{},o=a.validationConfig||{};i.one("validation",function(e,n){"function"==typeof t&&t(n,this,e)}),i.validateInputOnBlur(r,e.extend({},o,n||{}),!0)})},e.fn.willPostponeValidation=function(){return(this.valAttr("suggestion-nr")||this.valAttr("postpone")||this.hasClass("hasDatepicker"))&&!t.postponedValidation},e.fn.validateInputOnBlur=function(n,i,r,a){if(e.formUtils.eventType=a,this.willPostponeValidation()){var o=this,s=this.valAttr("postpone")||200;return t.postponedValidation=function(){o.validateInputOnBlur(n,i,r,a),t.postponedValidation=!1},setTimeout(function(){t.postponedValidation&&t.postponedValidation()},s),this}n=e.extend({},e.formUtils.LANG,n||{}),e.formUtils.dialogs.removeInputStylingAndMessage(this,i);var l=this,d=l.closest("form"),u=e.formUtils.validateInput(l,n,i,d,a),c=function(){l.validateInputOnBlur(n,i,!1,"blur.revalidated")};return"blur"===a&&l.unbind("validation.revalidate",c).one("validation.revalidate",c),r&&l.removeKeyUpValidation(),u.shouldChangeDisplay&&(u.isValid?e.formUtils.dialogs.applyInputSuccessStyling(l,i):e.formUtils.dialogs.setInlineMessage(l,u.errorMsg,i)),!u.isValid&&r&&l.validateOnKeyUp(n,i),this},e.fn.validateOnKeyUp=function(t,n){return this.each(function(){var i=e(this);i.valAttr("has-keyup-event")||i.valAttr("has-keyup-event","true").bind("keyup.validation",function(e){9!==e.keyCode&&i.validateInputOnBlur(t,n,!1,"keyup")})}),this},e.fn.removeKeyUpValidation=function(){return this.each(function(){e(this).valAttr("has-keyup-event",!1).unbind("keyup.validation")}),this},e.fn.valAttr=function(e,t){return void 0===t?this.attr("data-validation-"+e):!1===t||null===t?this.removeAttr("data-validation-"+e):(e=e.length>0?"-"+e:"",this.attr("data-validation"+e,t))},e.fn.isValid=function(t,n,i){if(e.formUtils.isLoadingModules){var r=this;return setTimeout(function(){r.isValid(t,n,i)},200),null}n=e.extend({},e.formUtils.defaultConfig(),n||{}),t=e.extend({},e.formUtils.LANG,t||{}),i=!1!==i,e.formUtils.errorDisplayPreventedWhenHalted&&(delete e.formUtils.errorDisplayPreventedWhenHalted,i=!1);var a=function(t,r){e.inArray(t,s)<0&&s.push(t),l.push(r),r.valAttr("current-error",t),i&&e.formUtils.dialogs.applyInputErrorStyling(r,n)},o=[],s=[],l=[],d=this,u=function(t,i){return"submit"===i||"button"===i||"reset"===i||e.inArray(t,n.ignore||[])>-1};if(i&&e.formUtils.dialogs.removeAllMessagesAndStyling(d,n),d.find("input,textarea,select").filter(':not([type="submit"],[type="button"])').each(function(){var i=e(this),r=i.attr("type"),s="radio"===r||"checkbox"===r,l=i.attr("name");if(!u(l,r)&&(!s||e.inArray(l,o)<0)){s&&o.push(l);var c=e.formUtils.validateInput(i,t,n,d,"submit");c.isValid?c.isValid&&c.shouldChangeDisplay&&(i.valAttr("current-error",!1),e.formUtils.dialogs.applyInputSuccessStyling(i,n)):a(c.errorMsg,i)}}),"function"==typeof n.onValidate){var c=n.onValidate(d);e.isArray(c)?e.each(c,function(e,t){a(t.message,t.element)}):c&&c.element&&c.message&&a(c.message,c.element)}return e.formUtils.isValidatingEntireForm=!1,l.length>0&&i&&("top"===n.errorMessagePosition?e.formUtils.dialogs.setMessageInTopOfForm(d,s,n,t):e.each(l,function(t,i){e.formUtils.dialogs.setInlineMessage(i,i.valAttr("current-error"),n)}),n.scrollToTopOnError&&e.formUtils.$win.scrollTop(d.offset().top-20)),!i&&e.formUtils.haltValidation&&(e.formUtils.errorDisplayPreventedWhenHalted=!0),0===l.length&&!e.formUtils.haltValidation},e.fn.restrictLength=function(t){return new e.formUtils.lengthRestriction(this,t),this},e.fn.addSuggestions=function(t){var n=!1;return this.find("input").each(function(){var i=e(this);n=e.split(i.attr("data-suggestions")),n.length>0&&!i.hasClass("has-suggestions")&&(e.formUtils.suggest(i,n,t),i.addClass("has-suggestions"))}),this}}(e,window),function(e){"use strict";e.formUtils=e.extend(e.formUtils||{},{isLoadingModules:!1,loadedModules:{},registerLoadedModule:function(t){this.loadedModules[e.trim(t).toLowerCase()]=!0},hasLoadedModule:function(t){return e.trim(t).toLowerCase()in this.loadedModules},loadModules:function(t,n,i){if(e.formUtils.isLoadingModules)return void setTimeout(function(){e.formUtils.loadModules(t,n,i)},100);var r=function(t,n){var r=e.split(t),a=r.length,o=function(){0===--a&&(e.formUtils.isLoadingModules=!1,"function"==typeof i&&i())};a>0&&(e.formUtils.isLoadingModules=!0);var s="?_="+(new Date).getTime(),l=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];e.each(r,function(t,i){if(i=e.trim(i),0===i.length||e.formUtils.hasLoadedModule(i))o();else{var r=n+i+(".js"===i.slice(-3)?"":".js"),a=document.createElement("SCRIPT");"function"==typeof define&&define.amd?require([r+(".dev.js"===r.slice(-7)?s:"")],o):(a.type="text/javascript",a.onload=o,a.src=r+(".dev.js"===r.slice(-7)?s:""),a.onerror=function(){e.formUtils.warn("Unable to load form validation module "+r),o()},a.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||(o(),this.onload=null,this.onreadystatechange=null)},l.appendChild(a))}})};if(n)r(t,n);else{var a=function(){var n=!1;return e('script[src*="form-validator"]').each(function(){if(!(this.src.split("form-validator")[1].split("node_modules").length>1))return n=this.src.substr(0,this.src.lastIndexOf("/"))+"/","/"===n&&(n=""),!1}),!1!==n&&(r(t,n),!0)};a()||e(function(){a()||"function"==typeof i&&i()})}}})}(e),function(e){"use strict";e.split=function(t,n,i){i=void 0===i||!0===i;var r="[,|"+(i?"\\s":"")+"-]\\s*",a=new RegExp(r,"g");if("function"!=typeof n){if(!t)return[];var o=[];return e.each(t.split(n||a),function(t,n){n=e.trim(n),n.length&&o.push(n)}),o}t&&e.each(t.split(a),function(t,i){if(i=e.trim(i),i.length)return n(i,t)})},e.validate=function(t){var n=e.extend(e.formUtils.defaultConfig(),{form:"form",validateOnEvent:!1,validateOnBlur:!0,validateCheckboxRadioOnClick:!0,showHelpOnFocus:!0,addSuggestions:!0,modules:"",onModulesLoaded:null,language:!1,onSuccess:!1,onError:!1,onElementValidate:!1});if(t=e.extend(n,t||{}),e(window).trigger("formValidationPluginInit",[t]),t.lang&&"en"!==t.lang){var i="lang/"+t.lang+".js";t.modules+=t.modules.length?","+i:i}e(t.form).each(function(n,i){i.validationConfig=t;var r=e(i);r.trigger("formValidationSetup",[r,t]),r.find(".has-help-txt").unbind("focus.validation").unbind("blur.validation"),r.removeClass("has-validation-callback").unbind("submit.validation").unbind("reset.validation").find("input[data-validation],textarea[data-validation]").unbind("blur.validation"),r.bind("submit.validation",function(n){var i=e(this),r=function(){return n.stopImmediatePropagation(),!1};if(e.formUtils.haltValidation)return r();if(e.formUtils.isLoadingModules)return setTimeout(function(){i.trigger("submit.validation")},200),r();var a=i.isValid(t.language,t);return e.formUtils.haltValidation?r():a&&"function"==typeof t.onSuccess?!1===t.onSuccess(i)?r():void 0:a||"function"!=typeof t.onError?!!a||r():(t.onError(i),r())}).bind("reset.validation",function(){e.formUtils.dialogs.removeAllMessagesAndStyling(r,t)}).addClass("has-validation-callback"),t.showHelpOnFocus&&r.showHelpOnFocus(),t.addSuggestions&&r.addSuggestions(),t.validateOnBlur&&(r.validateOnBlur(t.language,t),r.bind("html5ValidationAttrsFound",function(){r.validateOnBlur(t.language,t)})),t.validateOnEvent&&r.validateOnEvent(t.language,t)}),""!==t.modules&&e.formUtils.loadModules(t.modules,null,function(){"function"==typeof t.onModulesLoaded&&t.onModulesLoaded();var n="string"==typeof t.form?e(t.form):t.form;e.formUtils.$win.trigger("validatorsLoaded",[n,t])})}}(e),function(e,t){"use strict";var n=e(t);e.formUtils=e.extend(e.formUtils||{},{$win:n,defaultConfig:function(){return{ignore:[],errorElementClass:"error",successElementClass:"valid",borderColorOnError:"#b94a48",errorMessageClass:"form-error",validationRuleAttribute:"data-validation",validationErrorMsgAttribute:"data-validation-error-msg",errorMessagePosition:"inline",errorMessageTemplate:{container:'<div class="{errorMessageClass} alert alert-danger">{messages}</div>',messages:"<strong>{errorTitle}</strong><ul>{fields}</ul>",field:"<li>{msg}</li>"},scrollToTopOnError:!0,dateFormat:"yyyy-mm-dd",addValidClassOnAll:!1,decimalSeparator:".",inputParentClassOnError:"has-error",inputParentClassOnSuccess:"has-success",validateHiddenInputs:!1,inlineErrorMessageCallback:!1,submitErrorMessageCallback:!1}},validators:{},_events:{load:[],valid:[],invalid:[]},haltValidation:!1,addValidator:function(e){var t=0===e.name.indexOf("validate_")?e.name:"validate_"+e.name;void 0===e.validateOnKeyUp&&(e.validateOnKeyUp=!0),this.validators[t]=e},warn:function(e){"console"in t?"function"==typeof t.console.warn?t.console.warn(e):"function"==typeof t.console.log&&t.console.log(e):alert(e)},getValue:function(e,t){var n=t?t.find(e):e;if(n.length>0){var i=n.eq(0).attr("type");return"radio"===i||"checkbox"===i?n.filter(":checked").val()||"":n.val()||""}return!1},validateInput:function(t,n,i,r,a){i=i||e.formUtils.defaultConfig(),n=n||e.formUtils.LANG;var o=this.getValue(t);t.valAttr("skipped",!1).one("beforeValidation",function(){(t.attr("disabled")||!t.is(":visible")&&!i.validateHiddenInputs)&&t.valAttr("skipped",1)}).trigger("beforeValidation",[o,n,i]);var s="true"===t.valAttr("optional"),l=!o&&s,d=t.attr(i.validationRuleAttribute),u=!0,c="",f={isValid:!0,shouldChangeDisplay:!0,errorMsg:""};if(!d||l||t.valAttr("skipped"))return f.shouldChangeDisplay=i.addValidClassOnAll,f;var h=t.valAttr("ignore");return h&&e.each(h.split(""),function(e,t){o=o.replace(new RegExp("\\"+t,"g"),"")}),e.split(d,function(s){0!==s.indexOf("validate_")&&(s="validate_"+s);var l=e.formUtils.validators[s];if(!l)throw new Error('Using undefined validator "'+s+'". Maybe you have forgotten to load the module that "'+s+'" belongs to?');if("validate_checkbox_group"===s&&(t=r.find('[name="'+t.attr("name")+'"]:eq(0)')),("keyup"!==a||l.validateOnKeyUp)&&(u=l.validatorFunction(o,t,i,n,r,a)),!u)return i.validateOnBlur&&t.validateOnKeyUp(n,i),c=e.formUtils.dialogs.resolveErrorMessage(t,l,s,i,n),!1}),!1===u?(t.trigger("validation",!1),f.errorMsg=c,f.isValid=!1,f.shouldChangeDisplay=!0):null===u?f.shouldChangeDisplay=!1:(t.trigger("validation",!0),f.shouldChangeDisplay=!0),"function"==typeof i.onElementValidate&&null!==c&&i.onElementValidate(f.isValid,t,r,c),t.trigger("afterValidation",[f,a]),f},parseDate:function(t,n,i){var r,a,o,s,l=n.replace(/[a-zA-Z]/gi,"").substring(0,1),d="^",u=n.split(l||null);if(e.each(u,function(e,t){d+=(e>0?"\\"+l:"")+"(\\d{"+t.length+"})"}),d+="$",i){var c=[];e.each(t.split(l),function(e,t){1===t.length&&(t="0"+t),c.push(t)}),t=c.join(l)}if(null===(r=t.match(new RegExp(d))))return!1;var f=function(t,n,i){for(var r=0;r<n.length;r++)if(n[r].substring(0,1)===t)return e.formUtils.parseDateInt(i[r+1]);return-1};return o=f("m",u,r),a=f("d",u,r),s=f("y",u,r),!(2===o&&a>28&&(s%4!=0||s%100==0&&s%400!=0)||2===o&&a>29&&(s%4==0||s%100!=0&&s%400==0)||o>12||0===o)&&(!(this.isShortMonth(o)&&a>30||!this.isShortMonth(o)&&a>31||0===a)&&[s,o,a])},parseDateInt:function(e){return 0===e.indexOf("0")&&(e=e.replace("0","")),parseInt(e,10)},isShortMonth:function(e){return e%2==0&&e<7||e%2!=0&&e>7},lengthRestriction:function(t,n){var i=parseInt(n.text(),10),r=0,a=function(){var e=t.val().length;if(e>i){var a=t.scrollTop();t.val(t.val().substring(0,i)),t.scrollTop(a)}r=i-e,r<0&&(r=0),n.text(r)};e(t).bind("keydown keyup keypress focus blur",a).bind("cut paste",function(){setTimeout(a,100)}),e(document).bind("ready",a)},numericRangeCheck:function(t,n){var i=e.split(n),r=parseInt(n.substr(3),10);return 1===i.length&&-1===n.indexOf("min")&&-1===n.indexOf("max")&&(i=[n,n]),2===i.length&&(t<parseInt(i[0],10)||t>parseInt(i[1],10))?["out",i[0],i[1]]:0===n.indexOf("min")&&t<r?["min",r]:0===n.indexOf("max")&&t>r?["max",r]:["ok"]},_numSuggestionElements:0,_selectedSuggestion:null,_previousTypedVal:null,suggest:function(t,i,r){var a={css:{maxHeight:"150px",background:"#FFF",lineHeight:"150%",textDecoration:"underline",overflowX:"hidden",overflowY:"auto",border:"#CCC solid 1px",borderTop:"none",cursor:"pointer"},activeSuggestionCSS:{background:"#E9E9E9"}},o=function(e,t){var n=t.offset();e.css({width:t.outerWidth(),left:n.left+"px",top:n.top+t.outerHeight()+"px"})};r&&e.extend(a,r),a.css.position="absolute",a.css["z-index"]=9999,t.attr("autocomplete","off"),0===this._numSuggestionElements&&n.bind("resize",function(){e(".jquery-form-suggestions").each(function(){var t=e(this),n=t.attr("data-suggest-container");o(t,e(".suggestions-"+n).eq(0))})}),this._numSuggestionElements++;var s=function(t){var n=t.valAttr("suggestion-nr");e.formUtils._selectedSuggestion=null,e.formUtils._previousTypedVal=null,e(".jquery-form-suggestion-"+n).fadeOut("fast")};return t.data("suggestions",i).valAttr("suggestion-nr",this._numSuggestionElements).unbind("focus.suggest").bind("focus.suggest",function(){e(this).trigger("keyup"),e.formUtils._selectedSuggestion=null}).unbind("keyup.suggest").bind("keyup.suggest",function(){var n=e(this),i=[],r=e.trim(n.val()).toLocaleLowerCase();if(r!==e.formUtils._previousTypedVal){e.formUtils._previousTypedVal=r;var l=!1,d=n.valAttr("suggestion-nr"),u=e(".jquery-form-suggestion-"+d);if(u.scrollTop(0),""!==r){var c=r.length>2;e.each(n.data("suggestions"),function(e,t){var n=t.toLocaleLowerCase();if(n===r)return i.push("<strong>"+t+"</strong>"),l=!0,!1;(0===n.indexOf(r)||c&&n.indexOf(r)>-1)&&i.push(t.replace(new RegExp(r,"gi"),"<strong>$&</strong>"))})}l||0===i.length&&u.length>0?u.hide():i.length>0&&0===u.length?(u=e("<div></div>").css(a.css).appendTo("body"),t.addClass("suggestions-"+d),u.attr("data-suggest-container",d).addClass("jquery-form-suggestions").addClass("jquery-form-suggestion-"+d)):i.length>0&&!u.is(":visible")&&u.show(),i.length>0&&r.length!==i[0].length&&(o(u,n),u.html(""),e.each(i,function(t,i){e("<div></div>").append(i).css({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"5px"}).addClass("form-suggest-element").appendTo(u).click(function(){n.focus(),n.val(e(this).text()),n.trigger("change"),s(n)})}))}}).unbind("keydown.validation").bind("keydown.validation",function(t){var n,i,r=t.keyCode?t.keyCode:t.which,o=e(this);if(13===r&&null!==e.formUtils._selectedSuggestion){if(n=o.valAttr("suggestion-nr"),i=e(".jquery-form-suggestion-"+n),i.length>0){var l=i.find("div").eq(e.formUtils._selectedSuggestion).text();o.val(l),o.trigger("change"),s(o),t.preventDefault()}}else{n=o.valAttr("suggestion-nr"),i=e(".jquery-form-suggestion-"+n);var d=i.children();if(d.length>0&&e.inArray(r,[38,40])>-1){38===r?(null===e.formUtils._selectedSuggestion?e.formUtils._selectedSuggestion=d.length-1:e.formUtils._selectedSuggestion--,e.formUtils._selectedSuggestion<0&&(e.formUtils._selectedSuggestion=d.length-1)):40===r&&(null===e.formUtils._selectedSuggestion?e.formUtils._selectedSuggestion=0:e.formUtils._selectedSuggestion++,e.formUtils._selectedSuggestion>d.length-1&&(e.formUtils._selectedSuggestion=0));var u=i.innerHeight(),c=i.scrollTop(),f=i.children().eq(0).outerHeight(),h=f*e.formUtils._selectedSuggestion;return(h<c||h>c+u)&&i.scrollTop(h),d.removeClass("active-suggestion").css("background","none").eq(e.formUtils._selectedSuggestion).addClass("active-suggestion").css(a.activeSuggestionCSS),t.preventDefault(),!1}}}).unbind("blur.suggest").bind("blur.suggest",function(){s(e(this))}),t},LANG:{errorTitle:"Form submission failed!",requiredField:"This is a required field",requiredFields:"You have not answered all required fields",badTime:"You have not given a correct time",badEmail:"You have not given a correct e-mail address",badTelephone:"You have not given a correct phone number",badSecurityAnswer:"You have not given a correct answer to the security question",badDate:"You have not given a correct date",lengthBadStart:"The input value must be between ",lengthBadEnd:" characters",lengthTooLongStart:"The input value is longer than ",lengthTooShortStart:"The input value is shorter than ",notConfirmed:"Input values could not be confirmed",badDomain:"Incorrect domain value",badUrl:"The input value is not a correct URL",badCustomVal:"The input value is incorrect",andSpaces:" and spaces ",badInt:"The input value was not a correct number",badSecurityNumber:"Your social security number was incorrect",badUKVatAnswer:"Incorrect UK VAT Number",badUKNin:"Incorrect UK NIN",badUKUtr:"Incorrect UK UTR Number",badStrength:"The password isn't strong enough",badNumberOfSelectedOptionsStart:"You have to choose at least ",badNumberOfSelectedOptionsEnd:" answers",badAlphaNumeric:"The input value can only contain alphanumeric characters ",badAlphaNumericExtra:" and ",wrongFileSize:"The file you are trying to upload is too large (max %s)",wrongFileType:"Only files of type %s is allowed",groupCheckedRangeStart:"Please choose between ",groupCheckedTooFewStart:"Please choose at least ",groupCheckedTooManyStart:"Please choose a maximum of ",groupCheckedEnd:" item(s)",badCreditCard:"The credit card number is not correct",badCVV:"The CVV number was not correct",wrongFileDim:"Incorrect image dimensions,",imageTooTall:"the image can not be taller than",imageTooWide:"the image can not be wider than",imageTooSmall:"the image was too small",min:"min",max:"max",imageRatioNotAccepted:"Image ratio is not be accepted",badBrazilTelephoneAnswer:"The phone number entered is invalid",badBrazilCEPAnswer:"The CEP entered is invalid",badBrazilCPFAnswer:"The CPF entered is invalid",badPlPesel:"The PESEL entered is invalid",badPlNip:"The NIP entered is invalid",badPlRegon:"The REGON entered is invalid",badreCaptcha:"Please confirm that you are not a bot",passwordComplexityStart:"Password must contain at least ",passwordComplexitySeparator:", ",passwordComplexityUppercaseInfo:" uppercase letter(s)",passwordComplexityLowercaseInfo:" lowercase letter(s)",passwordComplexitySpecialCharsInfo:" special character(s)",passwordComplexityNumericCharsInfo:" numeric character(s)",passwordComplexityEnd:"."}})}(e,window),function(e){e.formUtils.addValidator({name:"email",validatorFunction:function(t){var n=t.toLowerCase().split("@"),i=n[0],r=n[1];if(i&&r){if(0===i.indexOf('"')){var a=i.length;if(i=i.replace(/\"/g,""),i.length!==a-2)return!1}return e.formUtils.validators.validate_domain.validatorFunction(n[1])&&0!==i.indexOf(".")&&"."!==i.substring(i.length-1,i.length)&&-1===i.indexOf("..")&&!/[^\w\+\.\-\#\-\_\~\!\$\&\'\(\)\*\+\,\;\=\:]/.test(i)}return!1},errorMessage:"",errorMessageKey:"badEmail"}),e.formUtils.addValidator({name:"domain",validatorFunction:function(e){return e.length>0&&e.length<=253&&!/[^a-zA-Z0-9]/.test(e.slice(-2))&&!/[^a-zA-Z0-9]/.test(e.substr(0,1))&&!/[^a-zA-Z0-9\.\-]/.test(e)&&1===e.split("..").length&&e.split(".").length>1},errorMessage:"",errorMessageKey:"badDomain"}),e.formUtils.addValidator({name:"required",validatorFunction:function(t,n,i,r,a){switch(n.attr("type")){case"checkbox":return n.is(":checked");case"radio":return a.find('input[name="'+n.attr("name")+'"]').filter(":checked").length>0;default:return""!==e.trim(t)}},errorMessage:"",errorMessageKey:function(e){return"top"===e.errorMessagePosition||"function"==typeof e.errorMessagePosition?"requiredFields":"requiredField"}}),e.formUtils.addValidator({name:"length",validatorFunction:function(t,n,i,r){var a=n.valAttr("length"),o=n.attr("type");if(void 0===a)return alert('Please add attribute "data-validation-length" to '+n[0].nodeName+" named "+n.attr("name")),!0;var s,l="file"===o&&void 0!==n.get(0).files?n.get(0).files.length:t.length,d=e.formUtils.numericRangeCheck(l,a);switch(d[0]){case"out":this.errorMessage=r.lengthBadStart+a+r.lengthBadEnd,s=!1;break;case"min":this.errorMessage=r.lengthTooShortStart+d[1]+r.lengthBadEnd,s=!1;break;case"max":this.errorMessage=r.lengthTooLongStart+d[1]+r.lengthBadEnd,s=!1;break;default:s=!0}return s},errorMessage:"",errorMessageKey:""}),e.formUtils.addValidator({name:"url",validatorFunction:function(t){if(/^(https?|ftp):\/\/((((\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])(\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])(\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/(((\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/((\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|\[|\]|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#(((\w|-|\.|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)){var n=t.split("://")[1],i=n.indexOf("/");return i>-1&&(n=n.substr(0,i)),e.formUtils.validators.validate_domain.validatorFunction(n)}return!1},errorMessage:"",errorMessageKey:"badUrl"}),e.formUtils.addValidator({name:"number",validatorFunction:function(e,t,n){if(""!==e){var i,r,a=t.valAttr("allowing")||"",o=t.valAttr("decimal-separator")||n.decimalSeparator,s=!1,l=t.valAttr("step")||"",d=!1;if((t.attr("data-sanitize")||"").match(/(^|[\s])numberFormat([\s]|$)/i)){if(!window.numeral)throw new ReferenceError("The data-sanitize value numberFormat cannot be used without the numeral library. Please see Data Validation in http://www.formvalidator.net for more information.");e.length&&(e=String(numeral().unformat(e)))}if(-1===a.indexOf("number")&&(a+=",number"),-1===a.indexOf("negative")&&0===e.indexOf("-"))return!1;if(a.indexOf("range")>-1&&(i=parseFloat(a.substring(a.indexOf("[")+1,a.indexOf(";"))),r=parseFloat(a.substring(a.indexOf(";")+1,a.indexOf("]"))),s=!0),""!==l&&(d=!0),","===o){if(e.indexOf(".")>-1)return!1;e=e.replace(",",".")}if(""===e.replace(/[0-9-]/g,"")&&(!s||e>=i&&e<=r)&&(!d||e%l==0))return!0;if(a.indexOf("float")>-1&&null!==e.match(new RegExp("^([0-9-]+)\\.([0-9]+)$"))&&(!s||e>=i&&e<=r)&&(!d||e%l==0))return!0}return!1},errorMessage:"",errorMessageKey:"badInt"}),e.formUtils.addValidator({name:"alphanumeric",validatorFunction:function(t,n,i,r){var a=n.valAttr("allowing"),o="",s=!1;if(a){o="^([a-zA-Z0-9"+a+"]+)$";var l=a.replace(/\\/g,"");l.indexOf(" ")>-1&&(s=!0,l=l.replace(" ",""),l+=r.andSpaces||e.formUtils.LANG.andSpaces),r.badAlphaNumericAndExtraAndSpaces&&r.badAlphaNumericAndExtra?this.errorMessage=s?r.badAlphaNumericAndExtraAndSpaces+l:r.badAlphaNumericAndExtra+l+r.badAlphaNumericExtra:this.errorMessage=r.badAlphaNumeric+r.badAlphaNumericExtra+l}else o="^([a-zA-Z0-9]+)$",this.errorMessage=r.badAlphaNumeric;return new RegExp(o).test(t)},errorMessage:"",errorMessageKey:""}),e.formUtils.addValidator({name:"custom",validatorFunction:function(e,t){return new RegExp(t.valAttr("regexp")).test(e)},errorMessage:"",errorMessageKey:"badCustomVal"}),e.formUtils.addValidator({name:"date",validatorFunction:function(t,n,i){var r=n.valAttr("format")||i.dateFormat||"yyyy-mm-dd",a="false"===n.valAttr("require-leading-zero");return!1!==e.formUtils.parseDate(t,r,a)},errorMessage:"",errorMessageKey:"badDate"}),e.formUtils.addValidator({name:"checkbox_group",validatorFunction:function(t,n,i,r,a){var o=!0,s=n.attr("name"),l=e('input[type=checkbox][name^="'+s+'"]',a),d=l.filter(":checked").length,u=n.valAttr("qty");if(void 0===u){var c=n.get(0).nodeName;alert('Attribute "data-validation-qty" is missing from '+c+" named "+n.attr("name"))}var f=e.formUtils.numericRangeCheck(d,u);switch(f[0]){case"out":this.errorMessage=r.groupCheckedRangeStart+u+r.groupCheckedEnd,o=!1;break
;case"min":this.errorMessage=r.groupCheckedTooFewStart+f[1]+(r.groupCheckedTooFewEnd||r.groupCheckedEnd),o=!1;break;case"max":this.errorMessage=r.groupCheckedTooManyStart+f[1]+(r.groupCheckedTooManyEnd||r.groupCheckedEnd),o=!1;break;default:o=!0}if(!o){var h=function(){l.unbind("click",h),l.filter("*[data-validation]").validateInputOnBlur(r,i,!1,"blur")};l.bind("click",h)}return o}})}(e)}),[].map||(Array.prototype.map=function(e,t){for(var n=this,i=n.length,r=new Array(i),a=0;a<i;a++)a in n&&(r[a]=e.call(t,n[a],a,n));return r}),[].filter||(Array.prototype.filter=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],r=arguments[1],a=0;a<n;a++)if(a in t){var o=t[a];e.call(r,o,a,t)&&i.push(o)}return i}),[].indexOf||(Array.prototype.indexOf=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!=i?i=0:0!==i&&i!=1/0&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var r=i>=0?i:Math.max(n-Math.abs(i),0);r<n;r++)if(r in t&&t[r]===e)return r;return-1});var nativeSplit=String.prototype.split,compliantExecNpcg=void 0===/()??/.exec("")[1];String.prototype.split=function(e,t){var n=this;if("[object RegExp]"!==Object.prototype.toString.call(e))return nativeSplit.call(n,e,t);var i,r,a,o,s=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),d=0;for(e=new RegExp(e.source,l+"g"),n+="",compliantExecNpcg||(i=new RegExp("^"+e.source+"$(?!\\s)",l)),t=void 0===t?-1>>>0:t>>>0;(r=e.exec(n))&&!((a=r.index+r[0].length)>d&&(s.push(n.slice(d,r.index)),!compliantExecNpcg&&r.length>1&&r[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(r[e]=void 0)}),r.length>1&&r.index<n.length&&Array.prototype.push.apply(s,r.slice(1)),o=r[0].length,d=a,s.length>=t));)e.lastIndex===r.index&&e.lastIndex++;return d===n.length?!o&&e.test("")||s.push(""):s.push(n.slice(d)),s.length>t?s.slice(0,t):s},function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):this.Picker=e(jQuery)}(function(e){function t(a,o,l,f){function h(){return t._.node("div",t._.node("div",t._.node("div",t._.node("div",M.component.nodes(C.open),F.box),F.wrap),F.frame),F.holder,'tabindex="-1"')}function p(){A.data(o,M).addClass(F.input).val(A.data("value")?M.get("select",x.format):a.value),x.editable||A.on("focus."+C.id+" click."+C.id,function(e){e.preventDefault(),M.open()}).on("keydown."+C.id,k),r(a,{haspopup:!0,expanded:!1,readonly:!1,owns:a.id+"_root"})}function m(){r(M.$root[0],"hidden",!0)}function g(){M.$holder.on({keydown:k,"focus.toOpen":y,blur:function(){A.removeClass(F.target)},focusin:function(e){M.$root.removeClass(F.focused),e.stopPropagation()},"mousedown click":function(t){var n=t.target;n!=M.$holder[0]&&(t.stopPropagation(),"mousedown"!=t.type||e(n).is("input, select, textarea, button, option")||(t.preventDefault(),M.$holder[0].focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var t=e(this),n=t.data(),i=t.hasClass(F.navDisabled)||t.hasClass(F.disabled),r=s();r=r&&(r.type||r.href),(i||r&&!e.contains(M.$root[0],r))&&M.$holder[0].focus(),!i&&n.nav?M.set("highlight",M.component.item.highlight,{nav:n.nav}):!i&&"pick"in n?(M.set("select",n.pick),x.closeOnSelect&&M.close(!0)):n.clear?(M.clear(),x.closeOnClear&&M.close(!0)):n.close&&M.close(!0)})}function v(){var t;!0===x.hiddenName?(t=a.name,a.name=""):(t=["string"==typeof x.hiddenPrefix?x.hiddenPrefix:"","string"==typeof x.hiddenSuffix?x.hiddenSuffix:"_submit"],t=t[0]+a.name+t[1]),M._hidden=e('<input type=hidden name="'+t+'"'+(A.data("value")||a.value?' value="'+M.get("select",x.formatSubmit)+'"':"")+">")[0],A.on("change."+C.id,function(){M._hidden.value=a.value?M.get("select",x.formatSubmit):""})}function b(){w&&c?M.$holder.find("."+F.frame).one("transitionend",function(){M.$holder[0].focus()}):M.$holder[0].focus()}function y(e){e.stopPropagation(),A.addClass(F.target),M.$root.addClass(F.focused),M.open()}function k(e){var t=e.keyCode,n=/^(8|46)$/.test(t);if(27==t)return M.close(!0),!1;(32==t||n||!C.open&&M.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?M.clear().close():M.open())}if(!a)return t;var w=!1,C={id:a.id||"P"+Math.abs(~~(Math.random()*new Date))},x=l?e.extend(!0,{},l.defaults,f):f||{},F=e.extend({},t.klasses(),x.klass),A=e(a),S=function(){return this.start()},M=S.prototype={constructor:S,$node:A,start:function(){return C&&C.start?M:(C.methods={},C.start=!0,C.open=!1,C.type=a.type,a.autofocus=a==s(),a.readOnly=!x.editable,a.id=a.id||C.id,"text"!=a.type&&(a.type="text"),M.component=new l(M,x),M.$root=e('<div class="'+F.picker+'" id="'+a.id+'_root" />'),m(),M.$holder=e(h()).appendTo(M.$root),g(),x.formatSubmit&&v(),p(),x.containerHidden?e(x.containerHidden).append(M._hidden):A.after(M._hidden),x.container?e(x.container).append(M.$root):A.after(M.$root),M.on({start:M.component.onStart,render:M.component.onRender,stop:M.component.onStop,open:M.component.onOpen,close:M.component.onClose,set:M.component.onSet}).on({start:x.onStart,render:x.onRender,stop:x.onStop,open:x.onOpen,close:x.onClose,set:x.onSet}),w=n(M.$holder[0]),a.autofocus&&M.open(),M.trigger("start").trigger("render"))},render:function(t){return t?(M.$holder=e(h()),g(),M.$root.html(M.$holder)):M.$root.find("."+F.box).html(M.component.nodes(C.open)),M.trigger("render")},stop:function(){return C.start?(M.close(),M._hidden&&M._hidden.parentNode.removeChild(M._hidden),M.$root.remove(),A.removeClass(F.input).removeData(o),setTimeout(function(){A.off("."+C.id)},0),a.type=C.type,a.readOnly=!1,M.trigger("stop"),C.methods={},C.start=!1,M):M},open:function(n){return C.open?M:(A.addClass(F.active),r(a,"expanded",!0),setTimeout(function(){M.$root.addClass(F.opened),r(M.$root[0],"hidden",!1)},0),!1!==n&&(C.open=!0,w&&u.css("overflow","hidden").css("padding-right","+="+i()),b(),d.on("click."+C.id+" focusin."+C.id,function(e){var t=e.target;t!=a&&t!=document&&3!=e.which&&M.close(t===M.$holder[0])}).on("keydown."+C.id,function(n){var i=n.keyCode,r=M.component.key[i],a=n.target;27==i?M.close(!0):a!=M.$holder[0]||!r&&13!=i?e.contains(M.$root[0],a)&&13==i&&(n.preventDefault(),a.click()):(n.preventDefault(),r?t._.trigger(M.component.key.go,M,[t._.trigger(r)]):M.$root.find("."+F.highlighted).hasClass(F.disabled)||(M.set("select",M.component.item.highlight),x.closeOnSelect&&M.close(!0)))})),M.trigger("open"))},close:function(e){return e&&(x.editable?a.focus():(M.$holder.off("focus.toOpen").focus(),setTimeout(function(){M.$holder.on("focus.toOpen",y)},0))),A.removeClass(F.active),r(a,"expanded",!1),setTimeout(function(){M.$root.removeClass(F.opened+" "+F.focused),r(M.$root[0],"hidden",!0)},0),C.open?(C.open=!1,w&&u.css("overflow","").css("padding-right","-="+i()),d.off("."+C.id),M.trigger("close")):M},clear:function(e){return M.set("clear",null,e)},set:function(t,n,i){var r,a,o=e.isPlainObject(t),s=o?t:{};if(i=o&&e.isPlainObject(n)?n:i||{},t){o||(s[t]=n);for(r in s)a=s[r],r in M.component.item&&(void 0===a&&(a=null),M.component.set(r,a,i)),"select"!=r&&"clear"!=r||A.val("clear"==r?"":M.get(r,x.format)).trigger("change");M.render()}return i.muted?M:M.trigger("set",s)},get:function(e,n){if(e=e||"value",null!=C[e])return C[e];if("valueSubmit"==e){if(M._hidden)return M._hidden.value;e="value"}if("value"==e)return a.value;if(e in M.component.item){if("string"==typeof n){var i=M.component.get(e);return i?t._.trigger(M.component.formats.toString,M.component,[n,i]):""}return M.component.get(e)}},on:function(t,n,i){var r,a,o=e.isPlainObject(t),s=o?t:{};if(t){o||(s[t]=n);for(r in s)a=s[r],i&&(r="_"+r),C.methods[r]=C.methods[r]||[],C.methods[r].push(a)}return M},off:function(){var e,t,n=arguments;for(e=0,namesCount=n.length;e<namesCount;e+=1)(t=n[e])in C.methods&&delete C.methods[t];return M},trigger:function(e,n){var i=function(e){var i=C.methods[e];i&&i.map(function(e){t._.trigger(e,M,[n])})};return i("_"+e),i(e),M}};return new S}function n(e){var t;return e.currentStyle?t=e.currentStyle.position:window.getComputedStyle&&(t=getComputedStyle(e).position),"fixed"==t}function i(){if(u.height()<=l.height())return 0;var t=e('<div style="visibility:hidden;width:100px" />').appendTo("body"),n=t[0].offsetWidth;t.css("overflow","scroll");var i=e('<div style="width:100%" />').appendTo(t),r=i[0].offsetWidth;return t.remove(),n-r}function r(t,n,i){if(e.isPlainObject(n))for(var r in n)a(t,r,n[r]);else a(t,n,i)}function a(e,t,n){e.setAttribute(("role"==t?"":"aria-")+t,n)}function o(t,n){e.isPlainObject(t)||(t={attribute:n}),n="";for(var i in t){var r=("role"==i?"":"aria-")+i;n+=null==t[i]?"":r+'="'+t[i]+'"'}return n}function s(){try{return document.activeElement}catch(e){}}var l=e(window),d=e(document),u=e(document.documentElement),c=null!=document.documentElement.style.transition;return t.klasses=function(e){return e=e||"picker",{picker:e,opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},t._={group:function(e){for(var n,i="",r=t._.trigger(e.min,e);r<=t._.trigger(e.max,e,[r]);r+=e.i)n=t._.trigger(e.item,e,[r]),i+=t._.node(e.node,n[0],n[1],n[2]);return i},node:function(t,n,i,r){return n?(n=e.isArray(n)?n.join(""):n,i=i?' class="'+i+'"':"",r=r?" "+r:"","<"+t+i+r+">"+n+"</"+t+">"):""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1==0},ariaAttr:o},t.extend=function(n,i){e.fn[n]=function(r,a){var o=this.data(n);return"picker"==r?o:o&&"string"==typeof r?t._.trigger(o[r],o,[a]):this.each(function(){e(this).data(n)||new t(this,n,i,r)})},e.fn[n].defaults=i.defaults},t}),function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,t){function n(e,t){var n=this,i=e.$node[0],r=i.value,a=e.$node.data("value"),o=a||r,s=a?t.formatSubmit:t.format,l=function(){return i.currentStyle?"rtl"==i.currentStyle.direction:"rtl"==getComputedStyle(e.$root[0]).direction};n.settings=t,n.$node=e.$node,n.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},n.item={},n.item.clear=null,n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return!0===e[0]?e.shift():-1}(n.item.disable),n.set("min",t.min).set("max",t.max).set("now"),o?n.set("select",o,{format:s,defaultValue:!0}):n.set("select",null).set("highlight",n.item.now),n.key={40:7,38:-7,39:function(){return l()?-1:1},37:function(){return l()?1:-1},go:function(e){var t=n.item.highlight,i=new Date(t.year,t.month,t.date+e);n.set("highlight",i,{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var n=this.value;n&&(e.set("highlight",[e.get("view").year,n,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var n=this.value;n&&(e.set("highlight",[n,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})},1).on("open",function(){var i="";n.disabled(n.get("now"))&&(i=":not(."+t.klass.buttonToday+")"),e.$root.find("button"+i+", select").attr("disabled",!1)},1).on("close",function(){e.$root.find("button, select").attr("disabled",!0)},1)}var i=e._;n.prototype.set=function(e,t,n){var i=this,r=i.item;return null===t?("clear"==e&&(e="select"),r[e]=t,i):(r["enable"==e?"disable":"flip"==e?"enable":e]=i.queue[e].split(" ").map(function(r){return t=i[r](e,t,n)}).pop(),"select"==e?i.set("highlight",r.select,n):"highlight"==e?i.set("view",r.highlight,n):e.match(/^(flip|min|max|disable|enable)$/)&&(r.select&&i.disabled(r.select)&&i.set("select",r.select,n),r.highlight&&i.disabled(r.highlight)&&i.set("highlight",r.highlight,n)),i)},n.prototype.get=function(e){return this.item[e]},n.prototype.create=function(e,n,r){var a,o=this;return n=void 0===n?e:n,n==-1/0||n==1/0?a=n:t.isPlainObject(n)&&i.isInteger(n.pick)?n=n.obj:t.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=i.isDate(n)?n:o.create().obj):n=i.isInteger(n)||i.isDate(n)?o.normalize(new Date(n),r):o.now(e,n,r),{year:a||n.getFullYear(),month:a||n.getMonth(),date:a||n.getDate(),day:a||n.getDay(),obj:a||n,pick:a||n.getTime()}},n.prototype.createRange=function(e,n){var r=this,a=function(e){return!0===e||t.isArray(e)||i.isDate(e)?r.create(e):e};return i.isInteger(e)||(e=a(e)),i.isInteger(n)||(n=a(n)),i.isInteger(e)&&t.isPlainObject(n)?e=[n.year,n.month,n.date+e]:i.isInteger(n)&&t.isPlainObject(e)&&(n=[e.year,e.month,e.date+n]),{from:a(e),to:a(n)}},n.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},n.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},n.prototype.now=function(e,t,n){return t=new Date,n&&n.rel&&t.setDate(t.getDate()+n.rel),this.normalize(t,n)},n.prototype.navigate=function(e,n,i){var r,a,o,s,l=t.isArray(n),d=t.isPlainObject(n),u=this.item.view;if(l||d){for(d?(a=n.year,o=n.month,s=n.date):(a=+n[0],o=+n[1],s=+n[2]),i&&i.nav&&u&&u.month!==o&&(a=u.year,o=u.month),r=new Date(a,o+(i&&i.nav?i.nav:0),1),a=r.getFullYear(),o=r.getMonth();new Date(a,o,s).getMonth()!==o;)s-=1;n=[a,o,s]}return n},n.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},n.prototype.measure=function(e,t){var n=this;return t?"string"==typeof t?t=n.parse(e,t):i.isInteger(t)&&(t=n.now(e,t,{rel:t})):t="min"==e?-1/0:1/0,t},n.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},n.prototype.validate=function(e,n,r){var a,o,s,l,d=this,u=n,c=r&&r.interval?r.interval:1,f=-1===d.item.enable,h=d.item.min,p=d.item.max,m=f&&d.item.disable.filter(function(e){if(t.isArray(e)){var r=d.create(e).pick;r<n.pick?a=!0:r>n.pick&&(o=!0)}return i.isInteger(e)}).length;if((!r||!r.nav&&!r.defaultValue)&&(!f&&d.disabled(n)||f&&d.disabled(n)&&(m||a||o)||!f&&(n.pick<=h.pick||n.pick>=p.pick)))for(f&&!m&&(!o&&c>0||!a&&c<0)&&(c*=-1);d.disabled(n)&&(Math.abs(c)>1&&(n.month<u.month||n.month>u.month)&&(n=u,c=c>0?1:-1),n.pick<=h.pick?(s=!0,c=1,n=d.create([h.year,h.month,h.date+(n.pick===h.pick?0:-1)])):n.pick>=p.pick&&(l=!0,c=-1,n=d.create([p.year,p.month,p.date+(n.pick===p.pick?0:1)])),!s||!l);)n=d.create([n.year,n.month,n.date+c]);return n},n.prototype.disabled=function(e){var n=this,r=n.item.disable.filter(function(r){return i.isInteger(r)?e.day===(n.settings.firstDay?r:r-1)%7:t.isArray(r)||i.isDate(r)?e.pick===n.create(r).pick:t.isPlainObject(r)?n.withinRange(r,e):void 0});return r=r.length&&!r.filter(function(e){return t.isArray(e)&&"inverted"==e[3]||t.isPlainObject(e)&&e.inverted}).length,-1===n.item.enable?!r:r||e.pick<n.item.min.pick||e.pick>n.item.max.pick},n.prototype.parse=function(e,t,n){var r=this,a={};return t&&"string"==typeof t?(n&&n.format||(n=n||{},n.format=r.settings.format),r.formats.toArray(n.format).map(function(e){var n=r.formats[e],o=n?i.trigger(n,r,[t,a]):e.replace(/^!/,"").length;n&&(a[e]=t.substr(0,o)),t=t.substr(o)}),[a.yyyy||a.yy,+(a.mm||a.m)-1,a.dd||a.d]):t},n.prototype.formats=function(){function e(e,t,n){var i=e.match(/[^\x00-\x7F]+|\w+/)[0];return n.mm||n.m||(n.m=t.indexOf(i)+1),i.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?i.digits(e):t.date},dd:function(e,t){return e?2:i.lead(t.date)},ddd:function(e,n){return e?t(e):this.settings.weekdaysShort[n.day]},dddd:function(e,n){return e?t(e):this.settings.weekdaysFull[n.day]},m:function(e,t){return e?i.digits(e):t.month+1},mm:function(e,t){return e?2:i.lead(t.month+1)},mmm:function(t,n){var i=this.settings.monthsShort;return t?e(t,i,n):i[n.month]},mmmm:function(t,n){var i=this.settings.monthsFull;return t?e(t,i,n):i[n.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return i.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}}}(),n.prototype.isDateExact=function(e,n){var r=this;return i.isInteger(e)&&i.isInteger(n)||"boolean"==typeof e&&"boolean"==typeof n?e===n:(i.isDate(e)||t.isArray(e))&&(i.isDate(n)||t.isArray(n))?r.create(e).pick===r.create(n).pick:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&(r.isDateExact(e.from,n.from)&&r.isDateExact(e.to,n.to))},n.prototype.isDateOverlap=function(e,n){var r=this,a=r.settings.firstDay?1:0;return i.isInteger(e)&&(i.isDate(n)||t.isArray(n))?(e=e%7+a)===r.create(n).day+1:i.isInteger(n)&&(i.isDate(e)||t.isArray(e))?(n=n%7+a)===r.create(e).day+1:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&r.overlapRanges(e,n)},n.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},n.prototype.deactivate=function(e,n){var r=this,a=r.item.disable.slice(0);return"flip"==n?r.flipEnable():!1===n?(r.flipEnable(1),a=[]):!0===n?(r.flipEnable(-1),a=[]):n.map(function(e){for(var n,o=0;o<a.length;o+=1)if(r.isDateExact(e,a[o])){n=!0;break}n||(i.isInteger(e)||i.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&a.push(e)}),a},n.prototype.activate=function(e,n){var r=this,a=r.item.disable,o=a.length;return"flip"==n?r.flipEnable():!0===n?(r.flipEnable(1),a=[]):!1===n?(r.flipEnable(-1),a=[]):n.map(function(e){var n,s,l,d;for(l=0;l<o;l+=1){if(s=a[l],r.isDateExact(s,e)){n=a[l]=null,d=!0;break}if(r.isDateOverlap(s,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e,n[3]||n.push("inverted")):i.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(n)for(l=0;l<o;l+=1)if(r.isDateExact(a[l],e)){a[l]=null;break}if(d)for(l=0;l<o;l+=1)if(r.isDateOverlap(a[l],e)){a[l]=null;break}n&&a.push(n)}),a.filter(function(e){return null!=e})},n.prototype.nodes=function(e){var t=this,n=t.settings,r=t.item,a=r.now,o=r.select,s=r.highlight,l=r.view,d=r.disable,u=r.min,c=r.max,f=function(e,t){return n.firstDay&&(e.push(e.shift()),t.push(t.shift())),i.node("thead",i.node("tr",i.group({min:0,max:6,i:1,node:"th",item:function(i){return[e[i],n.klass.weekdays,'scope=col title="'+t[i]+'"']}})))}((n.showWeekdaysFull?n.weekdaysFull:n.weekdaysShort).slice(0),n.weekdaysFull.slice(0)),h=function(e){return i.node("div"," ",n.klass["nav"+(e?"Next":"Prev")]+(e&&l.year>=c.year&&l.month>=c.month||!e&&l.year<=u.year&&l.month<=u.month?" "+n.klass.navDisabled:""),"data-nav="+(e||-1)+" "+i.ariaAttr({role:"button",controls:t.$node[0].id+"_table"})+' title="'+(e?n.labelMonthNext:n.labelMonthPrev)+'"')},p=function(){var r=n.showMonthsShort?n.monthsShort:n.monthsFull;return n.selectMonths?i.node("select",i.group({min:0,max:11,i:1,node:"option",item:function(e){return[r[e],0,"value="+e+(l.month==e?" selected":"")+(l.year==u.year&&e<u.month||l.year==c.year&&e>c.month?" disabled":"")]}}),n.klass.selectMonth,(e?"":"disabled")+" "+i.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+n.labelMonthSelect+'"'):i.node("div",r[l.month],n.klass.month)},m=function(){var r=l.year,a=!0===n.selectYears?5:~~(n.selectYears/2);if(a){var o=u.year,s=c.year,d=r-a,f=r+a;if(o>d&&(f+=o-d,d=o),s<f){var h=d-o,p=f-s;d-=h>p?p:h,f=s}return i.node("select",i.group({min:d,max:f,i:1,node:"option",item:function(e){return[e,0,"value="+e+(r==e?" selected":"")]}}),n.klass.selectYear,(e?"":"disabled")+" "+i.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+n.labelYearSelect+'"')}return i.node("div",r,n.klass.year)};return i.node("div",(n.selectYears?m()+p():p()+m())+h()+h(1),n.klass.header)+i.node("table",f+i.node("tbody",i.group({min:0,max:5,i:1,node:"tr",item:function(e){var r=n.firstDay&&0===t.create([l.year,l.month,1]).day?-7:0;return[i.group({min:7*e-l.day+r+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(e){e=t.create([l.year,l.month,e+(n.firstDay?1:0)]);var r=o&&o.pick==e.pick,f=s&&s.pick==e.pick,h=d&&t.disabled(e)||e.pick<u.pick||e.pick>c.pick,p=i.trigger(t.formats.toString,t,[n.format,e]);return[i.node("div",e.date,function(t){return t.push(l.month==e.month?n.klass.infocus:n.klass.outfocus),a.pick==e.pick&&t.push(n.klass.now),r&&t.push(n.klass.selected),f&&t.push(n.klass.highlighted),h&&t.push(n.klass.disabled),t.join(" ")}([n.klass.day]),"data-pick="+e.pick+" "+i.ariaAttr({role:"gridcell",label:p,selected:!(!r||t.$node.val()!==p)||null,activedescendant:!!f||null,disabled:!!h||null})),"",i.ariaAttr({role:"presentation"})]}})]}})),n.klass.table,'id="'+t.$node[0].id+'_table" '+i.ariaAttr({role:"grid",controls:t.$node[0].id,readonly:!0}))+i.node("div",i.node("button",n.today,n.klass.buttonToday,"type=button data-pick="+a.pick+(e&&!t.disabled(a)?"":" disabled")+" "+i.ariaAttr({controls:t.$node[0].id}))+i.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+i.ariaAttr({controls:t.$node[0].id}))+i.node("button",n.close,n.klass.buttonClose,"type=button data-close=true "+(e?"":" disabled")+" "+i.ariaAttr({controls:t.$node[0].id})),n.klass.footer)},n.defaults=function(e){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today",buttonClose:e+"button--close"}}}(e.klasses().picker+"__"),e.extend("pickadate",n)}),function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,t){function n(e,t){var n=this,i=e.$node[0].value,r=e.$node.data("value"),a=r||i,o=r?t.formatSubmit:t.format;n.settings=t,n.$node=e.$node,n.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},n.item={},n.item.clear=null,n.item.interval=t.interval||30,n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return!0===e[0]?e.shift():-1}(n.item.disable),n.set("min",t.min).set("max",t.max).set("now"),a?n.set("select",a,{format:o}):n.set("select",null).set("highlight",n.item.now),n.key={40:1,38:-1,39:1,37:-1,go:function(e){n.set("highlight",n.item.highlight.pick+e*n.item.interval,{interval:e*n.item.interval}),this.render()}},e.on("render",function(){var n=e.$root.children(),i=n.find("."+t.klass.viewset),r=function(e){return["webkit","moz","ms","o",""].map(function(t){return(t?"-"+t+"-":"")+e})},a=function(e,t){r("transform").map(function(n){e.css(n,t)}),r("transition").map(function(n){e.css(n,t)})};i.length&&(a(n,"none"),n[0].scrollTop=~~i.position().top-2*i[0].clientHeight,a(n,""))},1).on("open",function(){e.$root.find("button").attr("disabled",!1)},1).on("close",function(){e.$root.find("button").attr("disabled",!0)},1)}var i=e._;n.prototype.set=function(e,t,n){var i=this,r=i.item;return null===t?("clear"==e&&(e="select"),r[e]=t,i):(r["enable"==e?"disable":"flip"==e?"enable":e]=i.queue[e].split(" ").map(function(r){return t=i[r](e,t,n)}).pop(),"select"==e?i.set("highlight",r.select,n):"highlight"==e?i.set("view",r.highlight,n):"interval"==e?i.set("min",r.min,n).set("max",r.max,n):e.match(/^(flip|min|max|disable|enable)$/)&&(r.select&&i.disabled(r.select)&&i.set("select",t,n),r.highlight&&i.disabled(r.highlight)&&i.set("highlight",t,n),"min"==e&&i.set("max",r.max,n)),i)},n.prototype.get=function(e){return this.item[e]},n.prototype.create=function(e,n,r){var a=this;return n=void 0===n?e:n,i.isDate(n)&&(n=[n.getHours(),n.getMinutes()]),t.isPlainObject(n)&&i.isInteger(n.pick)?n=n.pick:t.isArray(n)?n=60*+n[0]+ +n[1]:i.isInteger(n)||(n=a.now(e,n,r)),"max"==e&&n<a.item.min.pick&&(n+=1440),"min"!=e&&"max"!=e&&(n-a.item.min.pick)%a.item.interval!=0&&(n+=a.item.interval),n=a.normalize(e,n,r),{hour:~~(24+n/60)%24,mins:(60+n%60)%60,time:(1440+n)%1440,pick:n%1440}},n.prototype.createRange=function(e,n){var r=this,a=function(e){return!0===e||t.isArray(e)||i.isDate(e)?r.create(e):e};return i.isInteger(e)||(e=a(e)),i.isInteger(n)||(n=a(n)),i.isInteger(e)&&t.isPlainObject(n)?e=[n.hour,n.mins+e*r.settings.interval]:i.isInteger(n)&&t.isPlainObject(e)&&(n=[e.hour,e.mins+n*r.settings.interval]),{from:a(e),to:a(n)}},n.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},n.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},n.prototype.now=function(e,t){var n,r=this.item.interval,a=new Date,o=60*a.getHours()+a.getMinutes(),s=i.isInteger(t);return o-=o%r,n=t<0&&r*t+o<=-r,o+="min"==e&&n?0:r,s&&(o+=r*(n&&"max"!=e?t+1:t)),o},n.prototype.normalize=function(e,t){var n=this.item.interval,i=this.item.min&&this.item.min.pick||0;return t-="min"==e?0:(t-i)%n},n.prototype.measure=function(e,n,r){var a=this;return n||(n="min"==e?[0,0]:[23,59]),"string"==typeof n?n=a.parse(e,n):!0===n||i.isInteger(n)?n=a.now(e,n,r):t.isPlainObject(n)&&i.isInteger(n.pick)&&(n=a.normalize(e,n.pick,r)),n},n.prototype.validate=function(e,t,n){var i=this,r=n&&n.interval?n.interval:i.item.interval;return i.disabled(t)&&(t=i.shift(t,r)),t=i.scope(t),i.disabled(t)&&(t=i.shift(t,-1*r)),t},n.prototype.disabled=function(e){var n=this,r=n.item.disable.filter(function(r){return i.isInteger(r)?e.hour==r:t.isArray(r)||i.isDate(r)?e.pick==n.create(r).pick:t.isPlainObject(r)?n.withinRange(r,e):void 0});return r=r.length&&!r.filter(function(e){return t.isArray(e)&&"inverted"==e[2]||t.isPlainObject(e)&&e.inverted}).length,-1===n.item.enable?!r:r||e.pick<n.item.min.pick||e.pick>n.item.max.pick},n.prototype.shift=function(e,t){var n=this,i=n.item.min.pick,r=n.item.max.pick;for(t=t||n.item.interval;n.disabled(e)&&(e=n.create(e.pick+=t),!(e.pick<=i||e.pick>=r)););return e},n.prototype.scope=function(e){var t=this.item.min.pick,n=this.item.max.pick;return this.create(e.pick>n?n:e.pick<t?t:e)},n.prototype.parse=function(e,t,n){var r,a,o,s,l,d=this,u={};if(!t||"string"!=typeof t)return t;n&&n.format||(n=n||{},n.format=d.settings.format),d.formats.toArray(n.format).map(function(e){var n,r=d.formats[e],a=r?i.trigger(r,d,[t,u]):e.replace(/^!/,"").length;r&&(n=t.substr(0,a),u[e]=n.match(/^\d+$/)?+n:n),t=t.substr(a)});for(s in u)l=u[s],i.isInteger(l)?s.match(/^(h|hh)$/i)?(r=l,"h"!=s&&"hh"!=s||(r%=12)):"i"==s&&(a=l):s.match(/^a$/i)&&l.match(/^p/i)&&("h"in u||"hh"in u)&&(o=!0);return 60*(o?r+12:r)+a},n.prototype.formats={h:function(e,t){return e?i.digits(e):t.hour%12||12},hh:function(e,t){return e?2:i.lead(t.hour%12||12)},H:function(e,t){return e?i.digits(e):""+t.hour%24},HH:function(e,t){return e?i.digits(e):i.lead(t.hour%24)},i:function(e,t){return e?2:i.lead(t.mins)},a:function(e,t){return e?4:720>t.time%1440?"a.m.":"p.m."},A:function(e,t){return e?2:720>t.time%1440?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return i.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}},n.prototype.isTimeExact=function(e,n){var r=this;return i.isInteger(e)&&i.isInteger(n)||"boolean"==typeof e&&"boolean"==typeof n?e===n:(i.isDate(e)||t.isArray(e))&&(i.isDate(n)||t.isArray(n))?r.create(e).pick===r.create(n).pick:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&(r.isTimeExact(e.from,n.from)&&r.isTimeExact(e.to,n.to))},n.prototype.isTimeOverlap=function(e,n){var r=this;return i.isInteger(e)&&(i.isDate(n)||t.isArray(n))?e===r.create(n).hour:i.isInteger(n)&&(i.isDate(e)||t.isArray(e))?n===r.create(e).hour:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&r.overlapRanges(e,n)},n.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},n.prototype.deactivate=function(e,n){var r=this,a=r.item.disable.slice(0);return"flip"==n?r.flipEnable():!1===n?(r.flipEnable(1),a=[]):!0===n?(r.flipEnable(-1),a=[]):n.map(function(e){for(var n,o=0;o<a.length;o+=1)if(r.isTimeExact(e,a[o])){n=!0;break}n||(i.isInteger(e)||i.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&a.push(e)}),a},n.prototype.activate=function(e,n){var r=this,a=r.item.disable,o=a.length;return"flip"==n?r.flipEnable():!0===n?(r.flipEnable(1),a=[]):!1===n?(r.flipEnable(-1),a=[]):n.map(function(e){var n,s,l,d;for(l=0;l<o;l+=1){if(s=a[l],r.isTimeExact(s,e)){n=a[l]=null,d=!0;break}if(r.isTimeOverlap(s,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e,n[2]||n.push("inverted")):i.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(n)for(l=0;l<o;l+=1)if(r.isTimeExact(a[l],e)){a[l]=null;break}if(d)for(l=0;l<o;l+=1)if(r.isTimeOverlap(a[l],e)){a[l]=null;break}n&&a.push(n)}),a.filter(function(e){return null!=e})},n.prototype.i=function(e,t){return i.isInteger(t)&&t>0?t:this.item.interval},n.prototype.nodes=function(e){var t=this,n=t.settings,r=t.item.select,a=t.item.highlight,o=t.item.view,s=t.item.disable;return i.node("ul",i.group({min:t.item.min.pick,max:t.item.max.pick,i:t.item.interval,node:"li",item:function(e){e=t.create(e);var l=e.pick,d=r&&r.pick==l,u=a&&a.pick==l,c=s&&t.disabled(e),f=i.trigger(t.formats.toString,t,[n.format,e]);return[i.trigger(t.formats.toString,t,[i.trigger(n.formatLabel,t,[e])||n.format,e]),function(e){return d&&e.push(n.klass.selected),u&&e.push(n.klass.highlighted),o&&o.pick==l&&e.push(n.klass.viewset),c&&e.push(n.klass.disabled),e.join(" ")}([n.klass.listItem]),"data-pick="+e.pick+" "+i.ariaAttr({role:"option",label:f,selected:!(!d||t.$node.val()!==f)||null,activedescendant:!!u||null,disabled:!!c||null})]}})+i.node("li",i.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+i.ariaAttr({controls:t.$node[0].id})),"",i.ariaAttr({role:"presentation"})),n.klass.list,i.ariaAttr({role:"listbox",controls:t.$node[0].id}))},n.defaults=function(e){return{clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,klass:{picker:e+" "+e+"--time",holder:e+"__holder",list:e+"__list",listItem:e+"__list-item",disabled:e+"__list-item--disabled",selected:e+"__list-item--selected",highlighted:e+"__list-item--highlighted",viewset:e+"__list-item--viewset",now:e+"__list-item--now",buttonClear:e+"__button--clear"}}}(e.klasses().picker),e.extend("pickatime",n)});